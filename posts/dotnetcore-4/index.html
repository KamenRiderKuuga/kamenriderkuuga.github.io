<!doctype html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content=".NET Core前后端分离(3) - ORM的选用(SqlSugar) + Code First初始化数据库" /><meta name="author" content="HANABI" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="经过之前的步骤，已经设置好了配置文件的读取方法，现在让我们来设置ORM，这里我们选用SqlSugar作为本项目的ORM" /><meta property="og:description" content="经过之前的步骤，已经设置好了配置文件的读取方法，现在让我们来设置ORM，这里我们选用SqlSugar作为本项目的ORM" /><link rel="canonical" href="https://lambda.cyou//posts/dotnetcore-4/" /><meta property="og:url" content="https://lambda.cyou//posts/dotnetcore-4/" /><meta property="og:site_name" content="HANABI" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-06-14T00:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content=".NET Core前后端分离(3) - ORM的选用(SqlSugar) + Code First初始化数据库" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@HANABI" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"HANABI"},"dateModified":"2020-06-14T00:00:00+08:00","datePublished":"2020-06-14T00:00:00+08:00","description":"经过之前的步骤，已经设置好了配置文件的读取方法，现在让我们来设置ORM，这里我们选用SqlSugar作为本项目的ORM","headline":".NET Core前后端分离(3) - ORM的选用(SqlSugar) + Code First初始化数据库","mainEntityOfPage":{"@type":"WebPage","@id":"https://lambda.cyou//posts/dotnetcore-4/"},"url":"https://lambda.cyou//posts/dotnetcore-4/"}</script><title>.NET Core前后端分离(3) - ORM的选用(SqlSugar) + Code First初始化数据库 | HANABI</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="HANABI"><meta name="application-name" content="HANABI"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return 'mode'; } static get MODE_ATTR() { return 'data-mode'; } static get DARK_MODE() { return 'dark'; } static get LIGHT_MODE() { return 'light'; } static get ID() { return 'mode-toggle'; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia('(prefers-color-scheme: dark)'); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { document.documentElement.removeAttribute(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage( { direction: ModeToggle.ID, message: this.modeStatus }, '*' ); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"> <img src="/assets/link.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><h1 class="site-title"> <a href="/">HANABI</a></h1><p class="site-subtitle fst-italic mb-0">可乐说自己是好猫</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>首页</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>归档</span> </a><li class="nav-item"> <a href="/read/" class="nav-link"> <i class="fa-fw fas fa-book-reader"></i> <span>札记</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/KamenRiderKuuga" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github-alt"></i> </a> <a href="javascript:location.href = 'mailto:' + ['wpfmaker','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/"> 首页 </a> </span> <span>.NET Core前后端分离(3) - ORM的选用(SqlSugar) + Code First初始化数据库</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> 文章</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">取消</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1"><header><h1 data-toc-skip>.NET Core前后端分离(3) - ORM的选用(SqlSugar) + Code First初始化数据库</h1><div class="post-meta text-muted"> <span> 发表于 <time data-ts="1592064000" data-df="YYYY/MM/DD" data-bs-toggle="tooltip" data-bs-placement="bottom" > 2020/06/14 </time> </span><div class="d-flex justify-content-between"> <span> 作者 <em> <a href=""></a> </em> </span> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1235 字" > <em>6 分钟</em>阅读</span></div></div></header><div class="content"><blockquote><p>经过之前的步骤，已经设置好了配置文件的读取方法，现在让我们来设置ORM，这里我们选用<a href="https://github.com/sunkaixuan/SqlSugar">SqlSugar</a>作为本项目的ORM</p></blockquote><h2 id="构建model层"><span class="me-2">构建Model层</span><a href="#构建model层" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>因为要使用<em>Code First</em>,先在解决方案下新增类库项目<em>Hanabi.Flow.Model</em>，引入ORM包<em>sqlSugarCore</em>，会在这里构建项目的<em>Model</em>层，在其中添加文件<em>RootEntity.cs</em>，内容为</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">class</span> <span class="nc">RootEntity</span>
<span class="p">{</span>
    <span class="c1">/// &lt;summary&gt;</span>
    <span class="c1">/// ID</span>
    <span class="c1">/// &lt;/summary&gt;</span>
    <span class="p">[</span><span class="nf">SugarColumn</span><span class="p">(</span><span class="n">IsNullable</span> <span class="p">=</span> <span class="k">false</span><span class="p">,</span> <span class="n">IsPrimaryKey</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">IsIdentity</span> <span class="p">=</span> <span class="k">true</span><span class="p">)]</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">Id</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    
<span class="p">}</span>
</pre></table></code></div></div><p>这是所有<em>Models</em>的基类，因为之后的所有<em>Models</em>都会具有<em>Id</em>列，所以它们都会继承这个类</p><p>新建类<em>UserRole.cs</em>以及<em>UserInfo.cs</em>，分别作为用户角色类以及用户信息类</p><p>这里只写出<em>UserRole.cs</em>的内容，注意详细定义每个字段的<em>SugarColumn</em>特性即可</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
</pre><td class="rouge-code"><pre><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// 权限ID</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="p">[</span><span class="nf">SugarColumn</span><span class="p">(</span><span class="n">IsNullable</span> <span class="p">=</span> <span class="k">false</span><span class="p">)]</span>
<span class="k">public</span> <span class="kt">int</span> <span class="n">RoleId</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

<span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// 角色名称</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="p">[</span><span class="nf">SugarColumn</span><span class="p">(</span><span class="n">ColumnDataType</span> <span class="p">=</span> <span class="s">"nvarchar"</span><span class="p">,</span><span class="n">Length</span> <span class="p">=</span> <span class="m">20</span><span class="p">,</span><span class="n">IsNullable</span> <span class="p">=</span> <span class="k">true</span><span class="p">)]</span>
<span class="k">public</span> <span class="kt">string</span> <span class="n">Name</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

<span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// 角色描述</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="p">[</span><span class="nf">SugarColumn</span><span class="p">(</span><span class="n">ColumnDataType</span> <span class="p">=</span> <span class="s">"nvarchar"</span><span class="p">,</span> <span class="n">Length</span> <span class="p">=</span> <span class="m">50</span><span class="p">,</span> <span class="n">IsNullable</span> <span class="p">=</span> <span class="k">true</span><span class="p">)]</span>
<span class="k">public</span> <span class="kt">string</span> <span class="n">Description</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

<span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// 创建者ID</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="p">[</span><span class="nf">SugarColumn</span><span class="p">(</span><span class="n">IsNullable</span> <span class="p">=</span> <span class="k">true</span><span class="p">)]</span>
<span class="k">public</span> <span class="kt">int</span><span class="p">?</span> <span class="n">CreateId</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

<span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// 创建时间</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="p">[</span><span class="nf">SugarColumn</span><span class="p">(</span><span class="n">IsNullable</span> <span class="p">=</span> <span class="k">false</span><span class="p">)]</span>
<span class="k">public</span> <span class="n">DateTime</span><span class="p">?</span> <span class="n">CreateTime</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">;</span>

<span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// 修改ID</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="p">[</span><span class="nf">SugarColumn</span><span class="p">(</span><span class="n">IsNullable</span> <span class="p">=</span> <span class="k">true</span><span class="p">)]</span>
<span class="k">public</span> <span class="kt">int</span><span class="p">?</span> <span class="n">ModifyId</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

<span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// 修改时间</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="p">[</span><span class="nf">SugarColumn</span><span class="p">(</span><span class="n">IsNullable</span> <span class="p">=</span> <span class="k">true</span><span class="p">)]</span>
<span class="k">public</span> <span class="n">DateTime</span><span class="p">?</span> <span class="n">ModifyTime</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">;</span>

<span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// 逻辑删除</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="p">[</span><span class="nf">SugarColumn</span><span class="p">(</span><span class="n">IsNullable</span> <span class="p">=</span> <span class="k">true</span><span class="p">)]</span>
<span class="k">public</span> <span class="kt">bool</span><span class="p">?</span> <span class="n">IsDeleted</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</pre></table></code></div></div><h2 id="定义数据库上下文类"><span class="me-2">定义数据库上下文类</span><a href="#定义数据库上下文类" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>新建Data文件夹， 在这里面新增数据库上下文类<em>MyContext</em>，主要用于建立和数据库之间的连接，以及程序启动时数据库的生成，其中<em>object.ObjToEnum</em>是一个自定义的扩展方法，之后可以在项目中查看具体写了啥</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="nn">Hanabi.Flow.Common.Helpers</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">SqlSugar</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Reflection</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">Hanabi.Flow.Data</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">MyContext</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="n">SqlSugarClient</span> <span class="n">_db</span><span class="p">;</span>
        <span class="k">private</span> <span class="k">static</span> <span class="kt">string</span> <span class="n">_connectionString</span><span class="p">;</span>
        <span class="k">private</span> <span class="k">static</span> <span class="n">DbType</span> <span class="n">_dbType</span><span class="p">;</span>

        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// 数据连接对象 </span>
        <span class="c1">/// Blog.Core </span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="k">public</span> <span class="n">SqlSugarClient</span> <span class="n">Db</span>
        <span class="p">{</span>
            <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_db</span><span class="p">;</span> <span class="p">}</span>
            <span class="k">private</span> <span class="k">set</span> <span class="p">{</span> <span class="n">_db</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span> <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// 连接字符串 </span>
        <span class="c1">/// Blog.Core</span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="k">public</span> <span class="k">static</span> <span class="kt">string</span> <span class="n">ConnectionString</span>
        <span class="p">{</span>
            <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_connectionString</span><span class="p">;</span> <span class="p">}</span>
            <span class="k">set</span> <span class="p">{</span> <span class="n">_connectionString</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span> <span class="p">}</span>
        <span class="p">}</span>
        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// 数据库类型 </span>
        <span class="c1">/// Blog.Core </span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="k">public</span> <span class="k">static</span> <span class="n">DbType</span> <span class="n">DbType</span>
        <span class="p">{</span>
            <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_dbType</span><span class="p">;</span> <span class="p">}</span>
            <span class="k">set</span> <span class="p">{</span> <span class="n">_dbType</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span> <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="nf">MyContext</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">string</span> <span class="n">connectionString</span> <span class="p">=</span> <span class="n">AppSettings</span><span class="p">.</span><span class="nf">app</span><span class="p">(</span><span class="s">"DBSetting"</span><span class="p">,</span> <span class="s">"DBString"</span><span class="p">);</span>
            <span class="kt">string</span> <span class="n">dbType</span> <span class="p">=</span> <span class="n">AppSettings</span><span class="p">.</span><span class="nf">app</span><span class="p">(</span><span class="s">"DBSetting"</span><span class="p">,</span> <span class="s">"DBType"</span><span class="p">);</span>
            <span class="n">_connectionString</span> <span class="p">=</span> <span class="n">connectionString</span><span class="p">;</span>
            <span class="n">_dbType</span> <span class="p">=</span> <span class="n">dbType</span><span class="p">.</span><span class="n">ObjToEnum</span><span class="p">&lt;</span><span class="n">DbType</span><span class="p">&gt;();</span>
            <span class="k">if</span> <span class="p">(</span><span class="kt">string</span><span class="p">.</span><span class="nf">IsNullOrEmpty</span><span class="p">(</span><span class="n">connectionString</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentNullException</span><span class="p">(</span><span class="s">"数据库连接字符串为空"</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="n">_db</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlSugarClient</span><span class="p">(</span><span class="k">new</span> <span class="nf">ConnectionConfig</span><span class="p">()</span>
            <span class="p">{</span>
                <span class="n">ConnectionString</span> <span class="p">=</span> <span class="n">connectionString</span><span class="p">,</span>
                <span class="n">DbType</span> <span class="p">=</span> <span class="n">_dbType</span><span class="p">,</span>
                <span class="n">IsAutoCloseConnection</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
                <span class="n">InitKeyType</span> <span class="p">=</span> <span class="n">InitKeyType</span><span class="p">.</span><span class="n">Attribute</span><span class="p">,</span><span class="c1">//mark</span>
                <span class="n">MoreSettings</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ConnMoreSettings</span><span class="p">()</span>
                <span class="p">{</span>
                    <span class="n">IsAutoRemoveDataCache</span> <span class="p">=</span> <span class="k">true</span>
                <span class="p">}</span>
            <span class="p">});</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">GeneratorData</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"正在初始化数据库..."</span><span class="p">);</span>
            <span class="n">_db</span><span class="p">.</span><span class="n">DbMaintenance</span><span class="p">.</span><span class="nf">CreateDatabase</span><span class="p">();</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"数据库初始化完毕"</span><span class="p">);</span>

            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"正在遍历Models"</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">modelTypes</span> <span class="p">=</span> <span class="n">Assembly</span><span class="p">.</span><span class="nf">GetExecutingAssembly</span><span class="p">().</span><span class="nf">GetTypes</span><span class="p">()</span>
                                                       <span class="p">.</span><span class="nf">Where</span><span class="p">(</span><span class="n">type</span> <span class="p">=&gt;</span> <span class="n">type</span><span class="p">.</span><span class="n">IsClass</span> <span class="p">&amp;&amp;</span> <span class="n">type</span><span class="p">.</span><span class="n">Namespace</span> <span class="p">==</span> <span class="s">"Blog.Core.Model.Models"</span><span class="p">)</span>
                                                       <span class="p">.</span><span class="nf">Select</span><span class="p">(</span><span class="n">type</span> <span class="p">=&gt;</span> <span class="n">type</span><span class="p">)</span>
                                                       <span class="p">.</span><span class="nf">ToList</span><span class="p">();</span>

            <span class="n">modelTypes</span><span class="p">.</span><span class="nf">ForEach</span><span class="p">(</span><span class="n">model</span> <span class="p">=&gt;</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(!</span><span class="n">_db</span><span class="p">.</span><span class="n">DbMaintenance</span><span class="p">.</span><span class="nf">IsAnyTable</span><span class="p">(</span><span class="n">model</span><span class="p">.</span><span class="n">Name</span><span class="p">))</span>
                <span class="p">{</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"正在建</span><span class="p">{</span><span class="n">model</span><span class="p">.</span><span class="n">Name</span><span class="p">}</span><span class="s">表"</span><span class="p">);</span>
                    <span class="n">_db</span><span class="p">.</span><span class="n">CodeFirst</span><span class="p">.</span><span class="nf">InitTables</span><span class="p">(</span><span class="n">model</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">});</span>

            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"建表完成"</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// 功能描述:根据实体类生成数据库表</span>
        <span class="c1">/// 作　　者:Blog.Core</span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="c1">/// &lt;param name="blnBackupTable"&gt;是否备份表&lt;/param&gt;</span>
        <span class="c1">/// &lt;param name="lstEntitys"&gt;指定的实体&lt;/param&gt;</span>
        <span class="k">public</span> <span class="k">void</span> <span class="n">CreateTableByEntity</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;(</span><span class="kt">bool</span> <span class="n">blnBackupTable</span><span class="p">,</span> <span class="k">params</span> <span class="n">T</span><span class="p">[]</span> <span class="n">lstEntitys</span><span class="p">)</span> <span class="k">where</span> <span class="n">T</span> <span class="p">:</span> <span class="k">class</span><span class="err">,</span> <span class="nc">new</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Type</span><span class="p">[]</span> <span class="n">lstTypes</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">lstEntitys</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">lstTypes</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Type</span><span class="p">[</span><span class="n">lstEntitys</span><span class="p">.</span><span class="n">Length</span><span class="p">];</span>
                <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">lstEntitys</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                <span class="p">{</span>
                    <span class="n">T</span> <span class="n">t</span> <span class="p">=</span> <span class="n">lstEntitys</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
                    <span class="n">lstTypes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="k">typeof</span><span class="p">(</span><span class="n">T</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="nf">CreateTableByEntity</span><span class="p">(</span><span class="n">blnBackupTable</span><span class="p">,</span> <span class="n">lstTypes</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// 功能描述:根据实体类生成数据库表</span>
        <span class="c1">/// 作　　者:Blog.Core</span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="c1">/// &lt;param name="blnBackupTable"&gt;是否备份表&lt;/param&gt;</span>
        <span class="c1">/// &lt;param name="lstEntitys"&gt;指定的实体&lt;/param&gt;</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">CreateTableByEntity</span><span class="p">(</span><span class="kt">bool</span> <span class="n">blnBackupTable</span><span class="p">,</span> <span class="k">params</span> <span class="n">Type</span><span class="p">[]</span> <span class="n">lstEntitys</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">blnBackupTable</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">_db</span><span class="p">.</span><span class="n">CodeFirst</span><span class="p">.</span><span class="nf">BackupTable</span><span class="p">().</span><span class="nf">InitTables</span><span class="p">(</span><span class="n">lstEntitys</span><span class="p">);</span> <span class="c1">//change entity backupTable            </span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">_db</span><span class="p">.</span><span class="n">CodeFirst</span><span class="p">.</span><span class="nf">InitTables</span><span class="p">(</span><span class="n">lstEntitys</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>接着我们在<em>Startup</em>中将其注册到服务</p><p>* services.AddScoped<MyContext>(); *</MyContext></p><p>接着在<em>Hanabi.Flow.API</em>项目中添加文件夹<em>Extensions</em>，添加文件<em>DataGenerator.cs</em>，在这里调用<em>MyContext</em>里的方法，实现启动时生成数据库</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">UseDataGenerator</span><span class="p">(</span><span class="k">this</span> <span class="n">IApplicationBuilder</span> <span class="n">app</span><span class="p">,</span> <span class="n">MyContext</span> <span class="n">myContext</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">myContext</span><span class="p">.</span><span class="nf">GeneratorData</span><span class="p">();</span>
<span class="p">}</span>
</pre></table></code></div></div><p>最后，在<em>Startup.cs</em>文件的<em>Configure</em>函数使用短路中间件(<em>UseEndpoints</em>)的后面使用这个新添加的中间件</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">app</span><span class="p">.</span><span class="nf">UseDataGenerator</span><span class="p">(</span><span class="n">myContext</span><span class="p">);</span>
</pre></table></code></div></div><p>启动程序，发现数据库已经在启动时被正确初始化了：</p><p><a href="/assets/img/dotnetcore-6.JPG" class="popup img-link shimmer"><img src="/assets/img/dotnetcore-6.JPG" alt="" loading="lazy"></a></p><p>连接数据库查看，确实已经生成了库和表，至此，利用<em>SqlSugar</em>作为ORM，并实现<em>Code First</em>就完成了</p><p><a href="/assets/img/dotnetcore-7.JPG" class="popup img-link shimmer"><img src="/assets/img/dotnetcore-7.JPG" alt="" loading="lazy"></a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/%E7%BC%96%E7%A8%8B%E6%A1%86%E6%9E%B6/">编程框架</a>, <a href="/categories/asp-net-core/">ASP.NET Core</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/net-core/" class="post-tag no-text-decoration" >.NET Core</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> 本文由作者按照 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 进行授权</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted me-1">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=.NET%20Core%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB(3)%20-%20ORM%E7%9A%84%E9%80%89%E7%94%A8(SqlSugar)%20+%20Code%20First%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93%20-%20HANABI&url=https%3A%2F%2Flambda.cyou%2F%2Fposts%2Fdotnetcore-4%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=.NET%20Core%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB(3)%20-%20ORM%E7%9A%84%E9%80%89%E7%94%A8(SqlSugar)%20+%20Code%20First%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93%20-%20HANABI&u=https%3A%2F%2Flambda.cyou%2F%2Fposts%2Fdotnetcore-4%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=.NET%20Core%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB(3)%20-%20ORM%E7%9A%84%E9%80%89%E7%94%A8(SqlSugar)%20+%20Code%20First%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93%20-%20HANABI&url=https%3A%2F%2Flambda.cyou%2F%2Fposts%2Fdotnetcore-4%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram" > <i class="fa-fw fab fa-telegram"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="分享链接" data-title-succeed="链接已复制！" > <i class="fa-fw fas fa-link pe-none"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted"><div class="access"><section><h2 class="panel-heading">热门标签</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/net-core/">.NET Core</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/">编程基础</a> <a class="post-tag btn btn-outline-primary" href="/tags/python/">Python</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E6%8A%80%E6%9C%AF%E5%A4%87%E5%BF%98/">技术备忘</a> <a class="post-tag btn btn-outline-primary" href="/tags/css/">CSS</a> <a class="post-tag btn btn-outline-primary" href="/tags/html/">HTML</a> <a class="post-tag btn btn-outline-primary" href="/tags/rust/">Rust</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E6%97%A5%E5%B8%B8%E5%B7%A5%E5%85%B7/">日常工具</a> <a class="post-tag btn btn-outline-primary" href="/tags/dbms/">DBMS</a> <a class="post-tag btn btn-outline-primary" href="/tags/docker/">Docker</a></div></section></div><section id="toc-wrapper" class="ps-0 pe-4"><h2 class="panel-heading ps-3 pt-2 mb-2">文章内容</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">相关文章</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/dotnetcore-1/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1591200000" data-df="YYYY/MM/DD" > 2020/06/04 </time><h4 class="pt-0 my-2">部署Vue+.NET Core前后端分离项目中遇到的问题</h4><div class="text-muted"><p> 这里记录一些在部署项目过程中容易忘记的点，主要做备忘用 Nginx 1.双击之后一闪而过 这个是在Windows中使用的时候出现的，双击nginx.exe之后一闪而过，打开任务管理器也没有相关进程，在浏览器中输入localhost也无法访问欢迎页面，检查之后才知道是因为nginx所在路径存在中文，换了没有中文的路径之后启动，没有出现此问题 2.配置vue项目后刷新后出现404...</p></div></div></a></article><article class="col"> <a href="/posts/dotnetcore-2/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1591891200" data-df="YYYY/MM/DD" > 2020/06/12 </time><h4 class="pt-0 my-2">.NET Core前后端分离(1) - Swagger的使用</h4><div class="text-muted"><p> 在前后端分离过程中,API文档是非常重要的,在项目搭建的第一步,我们使用Swagger来实现这一点 引入Nuget包 在项目中安装Swashbuckle.AspNetCore.SwaggerGen和Swashbuckle.AspNetCore.SwaggerUI 配置服务 在Startup.cs文件的ConfigureServices函数中添加服务: // 类中定义常量,方...</p></div></div></a></article><article class="col"> <a href="/posts/dotnetcore-3/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1591977600" data-df="YYYY/MM/DD" > 2020/06/13 </time><h4 class="pt-0 my-2">.NET Core前后端分离(2) - 配置文件与变量</h4><div class="text-muted"><p> 在代码中，为了避免代码复用，以及在没有编译条件时能调整程序内部的一些设置，常常需要有一个配置中心，方便快速更改整个程序的全局变量，所以我们先来编写好配置中心的相关代码 在代码中编写全局变量的一些方法 使用定义全局静态类，添加静态变量，方便修改，全局可用 采用依赖注入的方式在项目中注入一个Singleton的变量，使其在整个项目周期中都可以使用 这两种，都是直接写在代...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/dotnetcore-3/" class="btn btn-outline-primary" aria-label="上一篇" ><p>.NET Core前后端分离(2) - 配置文件与变量</p></a> <a href="/posts/dotnetcore-5/" class="btn btn-outline-primary" aria-label="下一篇" ><p>.NET Core前后端分离(4) -仓储层(Repository)和服务层(Service)层的创建</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p> © <time>2024</time> <a href="https://github.com/KamenRiderKuuga">HANABI</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。" >保留部分权利。</span></p><p>本站由 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 生成，采用 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> 主题。</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">热门标签</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/net-core/">.NET Core</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/">编程基础</a> <a class="post-tag btn btn-outline-primary" href="/tags/python/">Python</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E6%8A%80%E6%9C%AF%E5%A4%87%E5%BF%98/">技术备忘</a> <a class="post-tag btn btn-outline-primary" href="/tags/css/">CSS</a> <a class="post-tag btn btn-outline-primary" href="/tags/html/">HTML</a> <a class="post-tag btn btn-outline-primary" href="/tags/rust/">Rust</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E6%97%A5%E5%B8%B8%E5%B7%A5%E5%85%B7/">日常工具</a> <a class="post-tag btn btn-outline-primary" href="/tags/dbms/">DBMS</a> <a class="post-tag btn btn-outline-primary" href="/tags/docker/">Docker</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask"></div><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.1/dist/jquery.min.js,npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.10/dayjs.min.js,npm/dayjs@1.11.10/locale/zh.min.js,npm/dayjs@1.11.10/plugin/relativeTime.min.js,npm/dayjs@1.11.10/plugin/localizedFormat.min.js,npm/tocbot@4.21.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/unregister.js"></script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
